!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("loam",[],t):"object"==typeof exports?exports.loam=t():e.loam=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";function r(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0123456789abcdefghijklmnopqrstuvwxyz",n="",r=e;r>0;r--)n+=t[Math.floor(Math.random()*t.length)];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(){return d.src.substring(0,d.src.lastIndexOf("/"))+"/"}function o(){return void 0===s&&(s=new Promise(function(e,t){var n=new Worker(r()+"loam-worker.js");n.onmessage=function(t){t.data.ready&&(n.onmessage=function(e){e.data.success?f[e.data.id][0](e.data.result):f[e.data.id][1](new Error(e.data.message)),delete f[e.data.id]},e(n))}})),s}function i(e,t){for(var n=(0,l.default)();f.hasOwnProperty(n);)n=(0,l.default)();return f[n]=[e,t],n}function a(e,t){return o().then(function(n){return new Promise(function(r,o){var a=i(function(e){r(e)},function(e){o(e)});n.postMessage({id:a,function:e,arguments:t})})})}Object.defineProperty(t,"__esModule",{value:!0}),t.callWorker=t.initWorker=void 0;var u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f={},s=void 0,c=document.getElementsByTagName("script"),d=c[c.length-1];t.initWorker=o,t.callWorker=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=function(){function e(t,n,o,i){r(this,e),this.datasetPtr=t,this.filePath=n,this.directory=o,this.filename=i}return o(e,[{key:"_deleteSelf",value:function(){delete this.datasetPtr,delete this.filePath,delete this.directory,delete this.filename}},{key:"close",value:function(){var e=this;return(0,i.callWorker)("GDALClose",[this.datasetPtr,this.directory,this.filePath]).then(function(t){return e._deleteSelf(),t},function(t){throw e._deleteSelf(),t})}},{key:"closeAndReadBytes",value:function(){var e=this;return(0,i.callWorker)("GDALClose",[this.datasetPtr,this.directory,this.filePath,!0]).then(function(t){return e._deleteSelf(),t},function(t){throw e._deleteSelf(),t})}},{key:"count",value:function(){return(0,i.callWorker)("GDALGetRasterCount",[this.datasetPtr])}},{key:"width",value:function(){return(0,i.callWorker)("GDALGetRasterXSize",[this.datasetPtr])}},{key:"height",value:function(){return(0,i.callWorker)("GDALGetRasterYSize",[this.datasetPtr])}},{key:"wkt",value:function(){return(0,i.callWorker)("GDALGetProjectionRef",[this.datasetPtr])}},{key:"transform",value:function(){return(0,i.callWorker)("GDALGetGeoTransform",[this.datasetPtr])}},{key:"convert",value:function(t){return(0,i.callWorker)("GDALTranslate",[this.datasetPtr,t]).then(function(t){return new e(t.datasetPtr,t.filePath,t.directory,t.filename)},function(e){throw e})}},{key:"warp",value:function(t){return(0,i.callWorker)("GDALWarp",[this.datasetPtr,t]).then(function(t){return new e(t.datasetPtr,t.filePath,t.directory,t.filename)},function(e){throw e})}}]),e}();t.default=a,e.exports=t.default},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default={open:r.open,flushFS:r.flushFS,GDALDataset:i.default,initialize:r.initialize},e.exports=t.default},function(e,t,n){"use strict";function r(e){return(0,a.callWorker)("GDALOpen",[e]).then(function(e){return new l.default(e.datasetPtr,e.filePath,e.directory,e.filename)},function(e){throw e})}function o(){return(0,a.callWorker)("LoamFlushFS",[])}function i(){return(0,a.initWorker)()}Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=t.flushFS=t.open=void 0;var a=n(1),u=n(2),l=function(e){return e&&e.__esModule?e:{default:e}}(u);t.open=r,t.flushFS=o,t.initialize=i}])});